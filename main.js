(()=>{"use strict";var t={d:(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{k:()=>x,d:()=>L});const e=document.getElementById("projectsContainer");function n(t,e){console.log("h"),this.name=t,console.log("he"),this.description=e}const s=t=>{for(let e=0;e<x.length;e+=1)if(x[e].name===t)return!0},a=()=>{x.forEach((t=>(t=>{const n=document.createElement("article");n.className="mt-3";const s=document.createElement("h3");s.className="text-center";const a=document.createTextNode(t.name);if(s.appendChild(a),n.appendChild(s),0!=t.description){const e=document.createElement("p");e.className="description fst-italic";const s=document.createTextNode(t.description);e.appendChild(s),n.appendChild(e)}const l=document.createElement("button");l.className="delProjectBtn btn btn-light border-0 bg-secondary",l.innerHTML='<i class="delProjectBtn fas fa-times text-dark"></i>';const o=document.createElement("button");o.className="editProjectBtn btn btn-light border-0 bg-secondary",o.setAttribute("data-bs-toggle","modal"),o.setAttribute("data-bs-target","#exampleModal1"),o.innerHTML='<i class="editProjectBtn fas fa-align-right text-dark"></i>';const i=document.createElement("button");i.className="seeBtn btn btn-light border-0 bg-secondary",i.innerHTML='<i class="seeBtn fas fa-chevron-right text-dark">';const c=document.createElement("div");c.className="d-flex me-5 justify-content-around",c.appendChild(l),c.appendChild(o),c.appendChild(i),n.appendChild(c),e.appendChild(n)})(t)))},l=t=>1==t?'<i class="fas fa-flag text-success"></i>':2==t?'<i class="fas fa-flag text-info"></i>':3==t?'<i class="fas fa-flag text-warning"></i>':'<i class="fas fa-flag text-danger"></i>',o=t=>t?'<i class="fas fa-check  text-dark statusBTN"></i>':'<i class="fas fa-spinner text-dark statusBTN"></i>';function i(t,e,n,s,a){this.title=t,this.projectsN=e,this.comment=n,this.priority=s,this.deadline=a,this.finished=!1}document.getElementById("toDos");const c=document.getElementById("first"),d=document.getElementById("taskForm"),r=document.getElementById("tableArticle");let m=!1,u=!1;const p=(t,e)=>{c.innerHTML="",d.innerHTML="",r.innerHTML="";const n=document.createElement("div");n.className="p-3",n.innerHTML=`\n  <h2 class='prjct text-center'>Project: ${t}</h2>\n  <div class=" d-flex justify-content-center plus">\n    <h4 class="taskHeadline mt-1 me-5 mt-3 text-center">Your tasks</h4>\n    <button type="button" class="pb-2 text-dark btn btn-light plus">\n      <i class="fas fa-plus plus"></i>\n    </button>\n  </div>`,c.appendChild(n),h(e),m=!0,console.log(m)},h=t=>{const e=document.createElement("table");e.setAttribute("id","tasksTable"),e.classList="table",r.appendChild(e),tasksTable.innerHTML="\n  <thead class=\"table-dark\">\n          <tr>\n            <th class='col-1 ps-3'>#</th>\n            <th class='col-3 ps-3'>Title</th>\n            <th class='col-2'>Finished</th>\n            <th class='col-2'>Status</th>\n            <th class='col-2'>Details</th>\n            <th class='col-1'>Edit</th>\n            <th class='col-1 ps-3'>Delete</th>\n          </tr>\n        </thead>";const n=document.createElement("tbody");n.setAttribute("id","taskBody"),n.className="ps-5",r.appendChild(n),console.log(t),t.forEach((function(t){let e=L.indexOf(t)+1;n.innerHTML+=`\n          <tr>\n            <th scope="row" class='col-1 ps-3'>${e}</th>\n            <td class='col-3'>${t.title}</td>\n            <td class='col-2'>${l(t.priority)}</td>\n            <td class='col-2'><button type='button' class="statusBTN btn p-0 btn-light">${o(t.finished)}</button></td>\n            <td class='col-2'><button type='button' class="btn p-0 btn-light" data-bs-toggle="modal" data-bs-target="#detailsModal">\n              Details</button><td>\n              <td class='col-1'><button type='button' class='editTaskBtn btn p-0 btn-light'><i class="fas fa-pen text-dark editTaskBtn"></i></button></td>\n            <td class='col-1'><button type='button' class='deleteTaskBtn btn p-0 btn-light'><i class="fas fa-trash text-dark deleteTaskBtn"></i></button></td>\n\n          </tr>\n\n          <div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="detailsModalLabel" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title" id="detailsModalLabel">${t.title}</h5>\n        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n      </div>\n      <div class="modal-body">\n        <div> ${t.comment} </div>\n        <div> ${t.projectsN} </div>\n        <div> ${l(t.priority)}</div>\n        <div> ${o(t.finished)} </div>\n        <div> ${t.deadline} </div>\n      </div>\n    </div>\n  </div>\n</div>`}))},f=document.getElementById("addForm"),b=document.getElementById("nameInput"),g=document.getElementById("descriptionInput"),v=document.getElementById("first"),y=document.getElementById("projectsContainer"),k=document.getElementById("tableArticle");let x=[];function T(){console.log("in setProjectssss"),window.localStorage.setItem("myProjects",JSON.stringify(x))}null!==localStorage.getItem("myProjects")&&(x=JSON.parse(window.localStorage.getItem("myProjects")));let E="",L=[];function B(){console.log("in setTasks"),window.localStorage.setItem("myTasks",JSON.stringify(L))}null!==localStorage.getItem("myTasks")&&(L=JSON.parse(window.localStorage.getItem("myTasks"))),document.addEventListener("DOMContentLoaded",a()),f.addEventListener("submit",(t=>{t.preventDefault();const e=f[0].value,l=f[1].value;let o=!0;if(e||(alert("Project's name can't be empty"),o=!1),s(e)&&(alert("Project with same name already exists"),o=!1),!o)return!1;console.log("heree");const i=new n(e,l);console.log(i),x.push(i),T(),y.innerHTML="",a()})),document.getElementById("projectsContainer").addEventListener("click",(t=>{t.preventDefault();const e=t.target;E=e.closest("article").firstElementChild.textContent;let l=L.filter((t=>t.projectsN===E));if(e.classList.contains("delProjectBtn")&&(alert("No kidding?!"),e.closest("article").remove(),((t,e)=>{let n=[];for(let s=0;s<t.length;s+=1)t[s].name===e&&(n=t.splice(s,1))})(x,E),(t=>{console.log("in"),L.forEach((e=>{if(e.projectsN==t){console.log("innn");let t=L.indexOf(e);console.log(t),L.splice(t,1),c.innerHTML="",r.innerHTML=""}}))})(E),T(),B()),e.classList.contains("editProjectBtn")){let t=x.find((t=>t.name==E));console.log(t),b.value=t.name,console.log(b),g.value=t.description,console.log(g.value),editForm.addEventListener("submit",(e=>{e.preventDefault();const l=new n(editForm[0].value,editForm[1].value);console.log(l);let o=!0;if(l.name==t.name&&l.description==t.description)return alert("You haven't change anything"),void(o=!1);const i=l.name;s(i)&&l.name!=t.name&&(alert("Project with same name already exists"),console.log("herre"),o=!1),o&&(t.name=l.name,t.description=l.description,T(),y.innerHTML="",a())}))}e.classList.contains("seeBtn")&&((t,e)=>{if(m)c.innerHTML="",r.innerHTML="",m=!1,console.log(m);else{const n=document.createElement("div");n.className="p-3",n.innerHTML=`\n  <h2 class='prjct text-center'>Project: ${t}</h2>\n  <div class=" d-flex justify-content-center plus">\n    <h4 class="taskHeadline mt-1 me-5 mt-3 text-center">Your tasks</h4>\n    <button type="button" class="pb-2 text-dark btn btn-light plus">\n      <i class="fas fa-plus plus"></i>\n    </button>\n  </div>`,c.appendChild(n),h(e),m=!0,console.log(m)}})(E,l),E=E})),v.addEventListener("click",(t=>{t.preventDefault();const e=t.target;console.log("here"),e.classList.contains("plus")&&(console.log("here"),u?(d.innerHTML="",u=!1,console.log(u)):(d.innerHTML="\n    <input type='text' class=' my-2' name='taskName' id='task-name' placeholder='Add title here'>\n    <textarea  id='comment' class='my-2' rows='3' maxlength='150' placeholder='Add comment here'></textarea>\n    <select class='form-select me-4' id='selectPriority' aria-label='Default select example'>\n            <option selected value='1'>Select priority level</option>\n            <option id='one' value='1'>&#xf024; Priority 1</option>\n            <option id='two' value='2'>&#xf024; Priority 2</option>\n            <option id='three' value='3'>&#xf024; Priority 3</option>\n            <option id='four' value='4'>&#xf024; Priority 4</option>\n    </select>\n    <input type=\"date\" max='2110-13-13' id='datePicker'>\n    <button type='submit' class='btn btn-secondary' id='confirmTask'>Create task</button>\n    <button type='button' class='btn btn-light m-3' id='dismissTask'>Dismiss</button>\n  ",document.getElementById("datePicker").setAttribute("min",(()=>{let t=new Date,e=t.getDate(),n=t.getMonth()+1,s=t.getFullYear();return e<10&&(e="0"+e),n<10&&(n="0"+n),t=s+"-"+n+"-"+e,t})()),u=!0,console.log(u)))})),document.getElementById("taskForm").addEventListener("submit",(t=>{t.preventDefault();const e=t.target,n=e[0].value,s=e[1].value,a=e[2].value,l=e[3].value;if(confirm=!0,!n)return alert("Title must not be empty"),void(confirm=!1);if(confirm=!1)return;const o=new i(n,E,s,a,l);console.log(o),L.push(o),B();let c=L.filter((t=>t.projectsN===E));p(E,c)})),k.addEventListener("click",(t=>{t.preventDefault();const e=t.target;let n=parseInt(e.closest("tr").firstElementChild.textContent)-1;if(e.classList.contains("deleteTaskBtn")&&(e.closest("tr").remove(),L.splice(n,1),B()),e.classList.contains("statusBTN")){console.log("in finished"),(t=>{L[t].finished?L[t].finished=!1:L[t].finished=!0})(n),B();let t=L.filter((t=>t.projectsN===E));p(E,t)}}))})();