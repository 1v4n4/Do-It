(()=>{"use strict";var t={d:(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{k:()=>j,d:()=>M});const e=()=>{let t=new Date,e=t.getDate(),n=t.getMonth()+1;const s=t.getFullYear();return e<10&&(e=`0${e}`),n<10&&(n=`0${n}`),t=`${s}-${n}-${e}`,t},n=t=>"1"===t?'<i class="fa fa-flag text-danger"></i>':"2"===t?'<i class="fa fa-flag text-warning"></i>':"3"===t?'<i class="fa fa-flag text-info"></i>':"4"===t?'<i class="fa fa-flag text-success"></i>':void 0,s=t=>t?"Finished":"Pending",a=document.getElementById("projectsContainer");function i(t,e){this.name=t,this.description=e}const l=t=>{for(let e=0;e<j.length;e+=1)if(j[e].name===t)return!0;return!1},o=()=>{j.forEach((t=>(t=>{const e=document.createElement("article");e.className="mt-3";const n=document.createElement("h3");n.className="text-center";const s=document.createTextNode(t.name);if(n.appendChild(s),e.appendChild(n),0!==t.description){const n=document.createElement("p");n.className="description text-center fst-italic";const s=document.createTextNode(t.description);n.appendChild(s),e.appendChild(n)}const i=document.createElement("button");i.className="delProjectBtn btn btn-light border-0 bg-secondary",i.innerHTML='<i class="delProjectBtn fa fa-times text-dark"></i>';const l=document.createElement("button");l.className="editProjectBtn btn btn-light border-0 bg-secondary",l.setAttribute("data-bs-toggle","modal"),l.setAttribute("data-bs-target","#exampleModal1"),l.innerHTML='<i class="editProjectBtn fa fa-align-right text-dark"></i>';const o=document.createElement("button");o.className="seeBtn btn btn-light border-0 bg-secondary",o.innerHTML='<i class="seeBtn fa fa-chevron-right text-dark">';const c=document.createElement("div");c.className="d-flex me-5 justify-content-around",c.appendChild(i),c.appendChild(l),c.appendChild(o),e.appendChild(c),a.appendChild(e)})(t)))};function c(t,e,n,s,a){this.title=t,this.projectsN=e,this.comment=n,this.priority=s,this.deadline=a,this.finished=!1}const r=document.getElementById("first"),d=document.getElementById("taskForm"),m=document.getElementById("editTaskForm"),u=document.getElementById("tableArticle"),p=document.getElementById("todayContainer");let b=!1,f=!1;const h=t=>{const e=document.createElement("table");e.setAttribute("id","tasksTable"),e.classList="table",u.appendChild(e),e.innerHTML="\n  <thead class=\"table-dark\">\n          <tr>\n            <th class='col-1 ps-3'></th>\n            <th class='col-3 ps-3'>Title</th>\n            <th class='col-2'>Priority</th>\n            <th class='col-2'>Status</th>\n            <th class='col-2'>Details</th>\n            <th class='col-1'>Edit</th>\n            <th class='col-1 ps-3'>Delete</th>\n          </tr>\n        </thead>";const a=document.createElement("tbody");a.setAttribute("id","taskBody"),a.className="ps-5",u.appendChild(a),t.forEach((t=>{const e=M.indexOf(t)+1;var i;a.innerHTML+=`\n          <tr>\n            <th scope="row" class='col-1 text-light'>${e}</th>\n            <td class='col-3'>${t.title}</td>\n            <td class='col-2 ps-4'>${n(t.priority)}</td>\n            <td class='col-2 ps-3'><button type='button' class="statusBTN btn p-0 btn-light">${i=t.finished,i?'<i class="fa fa-check  text-dark statusBTN"></i>':'<i class="fa fa-spinner text-dark statusBTN"></i>'}</button></td>\n            <td class='col-2 ps-3'><button type='button' class="btn p-0 btn-light" data-bs-toggle="modal" data-bs-target="#Modal${e}">\n              Details</button><td>\n              <td class='col-1 ps-3'><button type='button' class='editTaskBtn btn p-0 btn-light'><i class="fa fa-wrench text-dark editTaskBtn"></i></button></td>\n            <td class='col-1 ps-3'><button type='button' class='deleteTaskBtn btn p-0 btn-light'><i class="fa fa-trash text-dark deleteTaskBtn"></i></button></td>\n\n          </tr>\n\n          <div class="modal fade" id="Modal${e}" tabindex="-1" aria-labelledby="${e}Label" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title fw-bold " id="${e}Label">${t.title}</h5>\n        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n      </div>\n      <div class="modal-body">\n        <p class="modalComment">Comment: ${t.comment} </p>\n        <p class="modalPrjct">Project: ${t.projectsN} </p>\n        <p>Priority: ${n(t.priority)}</p>\n        <p>Status: ${s(t.finished)} </p>\n        <p>Deadline: ${t.deadline} </p>\n      </div>\n    </div>\n  </div>\n</div>`}))},g=(t,e)=>{r.innerHTML="",d.innerHTML="",u.innerHTML="";const n=document.createElement("div");n.className="p-3",n.innerHTML=`\n  <h2 class='prjct text-center'>Project: ${t}</h2>\n  <div class=" d-flex justify-content-center plus">\n    <h4 class="taskHeadline mt-1 me-5 mt-3 text-center">Tasks</h4>\n    <button type="button" class="pb-2 text-dark btn btn-light plus">\n      <i class="fa fa-plus plus"></i>\n    </button>\n  </div>`,r.appendChild(n),h(e),b=!0},y=()=>{p.innerHTML="",M.filter((t=>t.deadline===e())).forEach((t=>{p.innerHTML+=`\n  <div class="card mx-auto mt-3 bg-light">\n            <div class="card-body bg-light">\n              <h5 class="card-title">${t.title}</h5>\n              <p class="card-text">${t.comment}</p>\n            </div>\n            <ul class="list-group  bg-light list-group-flush">\n              <li class="list-group-item bg-light">Project: ${t.projectsN}</li>\n              <li class="list-group-item bg-light">Priority: ${n(t.priority)}</li>\n              <li class="list-group-item bg-light">Status: ${s(t.finished)}</li>\n              <li class="list-group-item bg-light">Deadline: ${t.deadline}</li>\n            </ul>\n\n          </div>`}))},v=document.getElementById("addForm"),T=document.getElementById("nameInput"),k=document.getElementById("descriptionInput"),x=document.getElementById("first"),E=document.getElementById("projectsContainer"),L=document.getElementById("tableArticle"),P=document.getElementById("editForm"),B=document.getElementById("editTaskForm");let j=[];function N(){console.log("in setProjectssss"),window.localStorage.setItem("myProjects",JSON.stringify(j))}null!==localStorage.getItem("myProjects")&&(j=JSON.parse(window.localStorage.getItem("myProjects")));let $="",M=[];function C(){console.log("in setTasks"),window.localStorage.setItem("myTasks",JSON.stringify(M))}null!==localStorage.getItem("myTasks")&&(M=JSON.parse(window.localStorage.getItem("myTasks"))),document.addEventListener("DOMContentLoaded",o(),y()),v.addEventListener("submit",(t=>{t.preventDefault();const e=v[0].value,n=v[1].value;let s=!0;if(e||(alert("Project's name can't be empty"),s=!1),l(e)&&(alert("Project with same name already exists"),s=!1),!s)return!1;const a=new i(e,n);j.push(a),N(),E.innerHTML="",o(),v.reset()})),document.getElementById("projectsContainer").addEventListener("click",(t=>{t.preventDefault();const e=t.target;$=e.closest("article").firstElementChild.textContent;const n=M.filter((t=>t.projectsN===$));if(e.classList.contains("delProjectBtn")&&(alert("No kidding?!"),e.closest("article").remove(),((t,e)=>{let n=[];for(let s=0;s<t.length;s+=1)t[s].name===e&&(n=t.splice(s,1))})(j,$),(t=>{console.log(t),console.log(M);let e=M.filter((e=>e.projectsN!==t));console.log(e),M=e,console.log(M),r.innerHTML="",u.innerHTML="",p.innerHTML=""})($),N(),C(),console.log(M),y(),console.log("here")),e.classList.contains("editProjectBtn")){const t=j.find((t=>t.name===$));T.value=t.name,k.value=t.description,P.addEventListener("submit",(e=>{e.preventDefault();const n=new i(P[0].value,P[1].value);let s=!0;if(n.name===t.name&&n.description===t.description)return alert("You haven't change anything"),void(s=!1);const a=n.name;l(a)&&n.name!==t.name&&(alert("Project with same name already exists"),s=!1),s&&(t.name=n.name,t.description=n.description,N(),E.innerHTML="",o(),v.reset())}))}e.classList.contains("seeBtn")&&((t,e)=>{if(b)r.innerHTML="",u.innerHTML="",b=!1;else{const n=document.createElement("div");n.className="p-3",n.innerHTML=`\n  <h2 class='prjct text-center mt-5'>Project: ${t}</h2>\n  <div class=" d-flex justify-content-center plus">\n    <h4 class="taskHeadline mt-1 me-5 mt-3 text-center">Tasks</h4>\n    <button type="button" class="pb-2 text-dark btn btn-light plus">\n      <i class="fa fa-plus plus"></i>\n    </button>\n  </div>`,r.appendChild(n),h(e),b=!0}})($,n)})),x.addEventListener("click",(t=>{t.preventDefault(),t.target.classList.contains("plus")&&(f?(d.innerHTML="",f=!1):(d.innerHTML="\n    <input type='text' class=' my-2' name='taskName' id='task-name' placeholder='Add title here'>\n    <textarea  id='comment' class='my-2' rows='3' maxlength='150' placeholder='Add comment here'></textarea>\n    <select class='form-select me-4' id='selectPriority' aria-label='Default select example'>\n            <option selected value='1'>Select priority level</option>\n            <option class='one' value='1'>&#xf024; Priority 1</option>\n            <option class='two' value='2'>&#xf024; Priority 2</option>\n            <option class='three' value='3'>&#xf024; Priority 3</option>\n            <option class='four' value='4'>&#xf024; Priority 4</option>\n    </select>\n    <input type=\"date\" max='2110-13-13' id='datePicker'>\n    <button type='button' class='confirmTask btn btn-secondary' id='confirmTask'>Create task</button>\n    <button type='button' class='dismissTask btn btn-light m-3' id='dismissTask'>Dismiss</button>\n  ",document.getElementById("datePicker").setAttribute("min",e()),f=!0))}));const I=document.getElementById("taskForm");I.addEventListener("click",(t=>{t.preventDefault();const n=t.target;if(n.classList.contains("dismissTask"))return I.innerHTML="",void(f=!1);if(n.classList.contains("confirmTask")){const t=I[0].value,n=I[1].value,s=I[2].value;let a=I[3].value,i=!0;if(!t)return alert("Title must not be empty"),void(i=!1);if(!1===i)return!1;a||(a=e());const l=new c(t,$,n,s,a);M.push(l),C();const o=M.filter((t=>t.projectsN===$));g($,o),y(),I.reset()}})),L.addEventListener("click",(t=>{t.preventDefault();const s=t.target,a=parseInt(s.closest("tr").firstElementChild.textContent)-1;if(console.log("this",a),s.classList.contains("deleteTaskBtn")&&(alert("Are you sure?"),s.closest("tr").remove(),M.splice(a,1),C(),y()),s.classList.contains("statusBTN")){(t=>{M[t].finished?M[t].finished=!1:M[t].finished=!0})(a),C();const t=M.filter((t=>t.projectsN===$));g($,t)}if(s.classList.contains("editTaskBtn")){i=M[a],m.innerHTML=`\n      <input type='text' class=' my-2' name='EdiTaskName' id='edit-task-name' value='${i.title}'>\n      <textarea  id='editComment' class='my-2' rows='3' maxlength='150'> ${i.comment}</textarea>\n      <select class='form-select me-4' id='selectPriority1' aria-label='Default select example'>\n              <option selected value='1'>Priority ${n(i.priority)}</option>\n              <option class='one' value='1'>&#xf024; Priority 1</option>\n              <option class='two' value='2'>&#xf024; Priority 2</option>\n              <option class='three' value='3'>&#xf024; Priority 3</option>\n              <option class='four' value='4'>&#xf024; Priority 4</option>\n      </select>\n      <input type="date" max='2110-13-13' id='datePicker1' value='${i.date}'>\n      <button type='submit' class='confirmEditTask btn btn-secondary' id='confirmEditTask'>Edit task</button>\n      <button type='button' class='dismissEditTask btn btn-light m-3' id='dismissEditTask'>Dismiss</button>\n    `,document.getElementById("datePicker1").setAttribute("min",e()),B.addEventListener("click",(t=>{t.preventDefault();const n=t.target;if(n.classList.contains("dismissEditTask")&&(B.innerHTML=""),n.classList.contains("confirmEditTask")){const t=B[0].value,n=B[1].value,s=B[2].value;let i=B[3].value,l=!0;if(!t)return alert("Title must not be empty"),void(l=!1);if(!1===l)return!1;i||(i=e());const o=new c(t,$,n,s,i);M.splice(a,1,o),C();const r=M.filter((t=>t.projectsN===$));g($,r),y(),I.reset()}}))}var i}))})();