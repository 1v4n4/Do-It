(()=>{"use strict";var t={d:(e,n)=>{for(var s in n)t.o(n,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:n[s]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};t.d({},{k:()=>L,d:()=>P});const e=document.getElementById("projectsContainer");function n(t,e){console.log("h"),this.name=t,console.log("he"),this.description=e}const s=t=>{for(let e=0;e<L.length;e+=1)if(L[e].name===t)return!0},a=()=>{L.forEach((t=>(t=>{const n=document.createElement("article");n.className="mt-3";const s=document.createElement("h3");s.className="text-center";const a=document.createTextNode(t.name);if(s.appendChild(a),n.appendChild(s),0!=t.description){const e=document.createElement("p");e.className="description fst-italic";const s=document.createTextNode(t.description);e.appendChild(s),n.appendChild(e)}const l=document.createElement("button");l.className="delProjectBtn btn btn-light border-0 bg-secondary",l.innerHTML='<i class="delProjectBtn fas fa-times text-dark"></i>';const o=document.createElement("button");o.className="editProjectBtn btn btn-light border-0 bg-secondary",o.setAttribute("data-bs-toggle","modal"),o.setAttribute("data-bs-target","#exampleModal1"),o.innerHTML='<i class="editProjectBtn fas fa-align-right text-dark"></i>';const i=document.createElement("button");i.className="seeBtn btn btn-light border-0 bg-secondary",i.innerHTML='<i class="seeBtn fas fa-chevron-right text-dark">';const c=document.createElement("div");c.className="d-flex me-5 justify-content-around",c.appendChild(l),c.appendChild(o),c.appendChild(i),n.appendChild(c),e.appendChild(n)})(t)))},l=()=>{let t=new Date,e=t.getDate(),n=t.getMonth()+1,s=t.getFullYear();return e<10&&(e="0"+e),n<10&&(n="0"+n),t=s+"-"+n+"-"+e,t},o=t=>1==t?'<i class="fas fa-flag text-success"></i>':2==t?'<i class="fas fa-flag text-info"></i>':3==t?'<i class="fas fa-flag text-warning"></i>':'<i class="fas fa-flag text-danger"></i>',i=t=>t?'<i class="fas fa-check  text-dark statusBTN"></i>':'<i class="fas fa-spinner text-dark statusBTN"></i>';function c(t,e,n,s,a){this.title=t,this.projectsN=e,this.comment=n,this.priority=s,this.deadline=a,this.finished=!1}document.getElementById("toDos");const d=document.getElementById("first"),r=document.getElementById("taskForm"),m=document.getElementById("editForm"),u=document.getElementById("tableArticle");let p=!1,f=!1;const b=(t,e)=>{d.innerHTML="",r.innerHTML="",u.innerHTML="";const n=document.createElement("div");n.className="p-3",n.innerHTML=`\n  <h2 class='prjct text-center'>Project: ${t}</h2>\n  <div class=" d-flex justify-content-center plus">\n    <h4 class="taskHeadline mt-1 me-5 mt-3 text-center">Your tasks</h4>\n    <button type="button" class="pb-2 text-dark btn btn-light plus">\n      <i class="fas fa-plus plus"></i>\n    </button>\n  </div>`,d.appendChild(n),h(e),p=!0,console.log(p)},h=t=>{const e=document.createElement("table");e.setAttribute("id","tasksTable"),e.classList="table",u.appendChild(e),tasksTable.innerHTML="\n  <thead class=\"table-dark\">\n          <tr>\n            <th class='col-1 ps-3'></th>\n            <th class='col-3 ps-3'>Title</th>\n            <th class='col-2'>Finished</th>\n            <th class='col-2'>Status</th>\n            <th class='col-2'>Details</th>\n            <th class='col-1'>Edit</th>\n            <th class='col-1 ps-3'>Delete</th>\n          </tr>\n        </thead>";const n=document.createElement("tbody");n.setAttribute("id","taskBody"),n.className="ps-5",u.appendChild(n),console.log(t),t.forEach((function(t){let e=P.indexOf(t)+1;n.innerHTML+=`\n          <tr>\n            <th scope="row" class='col-1 '>${e}</th>\n            <td class='col-3'>${t.title}</td>\n            <td class='col-2 ps-4'>${o(t.priority)}</td>\n            <td class='col-2 ps-3'><button type='button' class="statusBTN btn p-0 btn-light">${i(t.finished)}</button></td>\n            <td class='col-2 ps-3'><button type='button' class="btn p-0 btn-light" data-bs-toggle="modal" data-bs-target="#detailsModal">\n              Details</button><td>\n              <td class='col-1 ps-3'><button type='button' class='editTaskBtn btn p-0 btn-light'><i class="fas fa-pen text-dark editTaskBtn"></i></button></td>\n            <td class='col-1 ps-3'><button type='button' class='deleteTaskBtn btn p-0 btn-light'><i class="fas fa-trash text-dark deleteTaskBtn"></i></button></td>\n\n          </tr>\n\n          <div class="modal fade" id="detailsModal" tabindex="-1" aria-labelledby="detailsModalLabel" aria-hidden="true">\n  <div class="modal-dialog">\n    <div class="modal-content">\n      <div class="modal-header">\n        <h5 class="modal-title" id="detailsModalLabel">${t.title}</h5>\n        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n      </div>\n      <div class="modal-body">\n        <div> ${t.comment} </div>\n        <div> ${t.projectsN} </div>\n        <div> ${o(t.priority)}</div>\n        <div> ${i(t.finished)} </div>\n        <div> ${t.deadline} </div>\n      </div>\n    </div>\n  </div>\n</div>`}))},g=document.getElementById("addForm"),y=document.getElementById("nameInput"),v=document.getElementById("descriptionInput"),k=document.getElementById("first"),x=document.getElementById("projectsContainer"),E=document.getElementById("tableArticle"),T=document.getElementById("editForm");let L=[];function B(){console.log("in setProjectssss"),window.localStorage.setItem("myProjects",JSON.stringify(L))}null!==localStorage.getItem("myProjects")&&(L=JSON.parse(window.localStorage.getItem("myProjects")));let j="",P=[];function N(){console.log("in setTasks"),window.localStorage.setItem("myTasks",JSON.stringify(P))}null!==localStorage.getItem("myTasks")&&(P=JSON.parse(window.localStorage.getItem("myTasks"))),document.addEventListener("DOMContentLoaded",a()),g.addEventListener("submit",(t=>{t.preventDefault();const e=g[0].value,l=g[1].value;let o=!0;if(e||(alert("Project's name can't be empty"),o=!1),s(e)&&(alert("Project with same name already exists"),o=!1),!o)return!1;console.log("heree");const i=new n(e,l);console.log(i),L.push(i),B(),x.innerHTML="",a()})),document.getElementById("projectsContainer").addEventListener("click",(t=>{t.preventDefault();const e=t.target;j=e.closest("article").firstElementChild.textContent;let l=P.filter((t=>t.projectsN===j));if(e.classList.contains("delProjectBtn")&&(alert("No kidding?!"),e.closest("article").remove(),((t,e)=>{let n=[];for(let s=0;s<t.length;s+=1)t[s].name===e&&(n=t.splice(s,1))})(L,j),(t=>{console.log("in"),P.forEach((e=>{if(e.projectsN==t){console.log("innn");let t=P.indexOf(e);console.log(t),P.splice(t,1),d.innerHTML="",u.innerHTML=""}}))})(j),B(),N()),e.classList.contains("editProjectBtn")){let t=L.find((t=>t.name==j));console.log(t),y.value=t.name,console.log(y),v.value=t.description,console.log(v.value),T.addEventListener("submit",(e=>{e.preventDefault();const l=new n(T[0].value,T[1].value);console.log(l);let o=!0;if(l.name==t.name&&l.description==t.description)return alert("You haven't change anything"),void(o=!1);const i=l.name;s(i)&&l.name!=t.name&&(alert("Project with same name already exists"),console.log("herre"),o=!1),o&&(t.name=l.name,t.description=l.description,B(),x.innerHTML="",a())}))}e.classList.contains("seeBtn")&&((t,e)=>{if(p)d.innerHTML="",u.innerHTML="",p=!1,console.log(p);else{const n=document.createElement("div");n.className="p-3",n.innerHTML=`\n  <h2 class='prjct text-center'>Project: ${t}</h2>\n  <div class=" d-flex justify-content-center plus">\n    <h4 class="taskHeadline mt-1 me-5 mt-3 text-center">Your tasks</h4>\n    <button type="button" class="pb-2 text-dark btn btn-light plus">\n      <i class="fas fa-plus plus"></i>\n    </button>\n  </div>`,d.appendChild(n),h(e),p=!0,console.log(p)}})(j,l),j=j})),k.addEventListener("click",(t=>{t.preventDefault();const e=t.target;console.log("here"),e.classList.contains("plus")&&(console.log("here"),f?(r.innerHTML="",f=!1,console.log(f)):(r.innerHTML="\n    <input type='text' class=' my-2' name='taskName' id='task-name' placeholder='Add title here'>\n    <textarea  id='comment' class='my-2' rows='3' maxlength='150' placeholder='Add comment here'></textarea>\n    <select class='form-select me-4' id='selectPriority' aria-label='Default select example'>\n            <option selected value='1'>Select priority level</option>\n            <option class='one' value='1'>&#xf024; Priority 1</option>\n            <option class='two' value='2'>&#xf024; Priority 2</option>\n            <option class='three' value='3'>&#xf024; Priority 3</option>\n            <option class='four' value='4'>&#xf024; Priority 4</option>\n    </select>\n    <input type=\"date\" max='2110-13-13' id='datePicker'>\n    <button type='submit' class='btn btn-secondary' id='confirmTask'>Create task</button>\n    <button type='button' class='btn btn-light m-3' id='dismissTask'>Dismiss</button>\n  ",document.getElementById("datePicker").setAttribute("min",l()),f=!0,console.log(f)))})),document.getElementById("taskForm").addEventListener("submit",(t=>{t.preventDefault();const e=t.target,n=e[0].value,s=e[1].value,a=e[2].value,l=e[3].value;if(confirm=!0,!n)return alert("Title must not be empty"),void(confirm=!1);if(confirm=!1)return;const o=new c(n,j,s,a,l);console.log(o),P.push(o),N();let i=P.filter((t=>t.projectsN===j));b(j,i)})),E.addEventListener("click",(t=>{t.preventDefault();const e=t.target;let n=parseInt(e.closest("tr").firstElementChild.textContent)-1;if(e.classList.contains("deleteTaskBtn")&&(e.closest("tr").remove(),P.splice(n,1),N()),e.classList.contains("statusBTN")){console.log("in finished"),(t=>{P[t].finished?P[t].finished=!1:P[t].finished=!0})(n),N();let t=P.filter((t=>t.projectsN===j));b(j,t)}if(e.classList.contains("editTaskBtn")){s=P[n],m.innerHTML=`\n      <input type='text' class=' my-2' name='EdiTaskName' id='edit-task-name' value='${s.title}'>\n      <textarea  id='editComment' class='my-2' rows='3' maxlength='150'> ${s.comment}</textarea>\n      <select class='form-select me-4' id='selectPriority1' aria-label='Default select example'>\n              <option selected value='1'>Priority ${s.priority}</option>\n              <option class='one' value='1'>&#xf024; Priority 1</option>\n              <option class='two' value='2'>&#xf024; Priority 2</option>\n              <option class='three' value='3'>&#xf024; Priority 3</option>\n              <option class='four' value='4'>&#xf024; Priority 4</option>\n      </select>\n      <input type="date" max='2110-13-13' id='datePicker1' value='${s.date}'>\n      <button type='submit' class='confirmEditTask btn btn-secondary' id='confirmEditTask'>Edit task</button>\n      <button type='button' class='dismissEditTask btn btn-light m-3' id='dismissEditTask'>Dismiss</button>\n    `,document.getElementById("datePicker1").setAttribute("min",l()),T.addEventListener("click",(t=>{t.preventDefault();let e=t.target;if(e.classList.contains("dismissEditTask")&&(T.innerHTML=""),e.classList.contains("confirmEditTask")){console.log(P);const t=new c(T[0].value,j,T[1].value,T[2].value,T[3].value);console.log(t),P.splice(n,1,t);let e=P.filter((t=>t.projectsN===j));b(j,e),N()}console.log(P)}))}var s}))})();